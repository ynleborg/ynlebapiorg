<html>
<head>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css"
          crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<table id="leaderboard" class="display compact">
    <thead>
    <tr>
        <th>Pozycja</th>
        <th>Gracz</th>
        <th>Platforma</th>
        <th>Start</th>
        <th>Aktualny</th>
        <th>Delta</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script>
    $.ajax({
        url: "http://localhost:9080/api/leaderboard" //do test√≥w
        //url: "/api/leaderboard"
    }).done(function (data) {
        let i = 1;
        for (let row of data) {
            var tr = document.createElement("tr");
            tr.appendChild(addRow(i++, 'position'));
            tr.appendChild(addGamerRow(row.userName, row.icon, row.link));
            tr.appendChild(addRow(row.platform, row.platform));
            tr.appendChild(addRow(row.initialScore, 'score'));
            tr.appendChild(addRow(row.currentScore, 'score'));
            tr.appendChild(addRow(row.delta, 'score'));
            $("#leaderboard tbody").append(tr);
        }
        $('#leaderboard').DataTable({
            paging: false
        });
    });

    function addGamerRow(value, icon, link) {
        let td = document.createElement("td");
        let div = document.createElement('div');
        let img = document.createElement('img');
        img.setAttribute('src', icon);
        let a = document.createElement('a');
        a.classList.add("username");
        let createAText = document.createTextNode(value);
        a.appendChild(createAText);
        a.setAttribute('href', link);
        div.appendChild(img);
        div.appendChild(a);
        td.appendChild(div);
        return td;
    }

    function addRow(value, className) {
        let td = document.createElement("td");
        let div = document.createElement('div');
        div.classList.add(className);
        let cell = document.createTextNode(value);
        div.appendChild(cell);
        td.appendChild(div);
        return td;
    }
</script>
</body>
</html>
